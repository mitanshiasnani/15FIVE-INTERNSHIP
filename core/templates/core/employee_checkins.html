{% extends "core/employee_base.html" %}

{% block title %}My Check-Ins | 15-Five{% endblock %}

{% block content %}

<h1 class="page-title">My Check-Ins</h1>

{% for assignment in assignments %}
    <div class="checkin-card">
        <div class="checkin-left">

            <!-- STATUS ICON -->
            {% if assignment.status == "SUBMITTED" %}
                <div class="checkin-icon success-icon">
                    <i class="bi bi-check-circle"></i>
                </div>
            {% elif assignment.status == "PARTIAL" %}
                <div class="checkin-icon info-icon">
                    <i class="bi bi-pencil-square"></i>
                </div>
            {% else %}
                <div class="checkin-icon pending-icon">
                    <i class="bi bi-clock"></i>
                </div>
            {% endif %}

            <div>
                <div class="checkin-title">
                    {{ assignment.checkin_form.start_date|date:"d M Y" }}
                    â†’
                    {{ assignment.checkin_form.end_date|date:"d M Y" }}
                </div>
                <div class="checkin-date">
                    {{ assignment.checkin_form.title }}
                </div>
            </div>
        </div>

        <div class="checkin-right">
            {% if assignment.status == "SUBMITTED" %}
                <span class="badge rounded-pill bg-success-subtle text-success">
                    Submitted
                </span>
                <a href="{% url 'employee_checkin_form' assignment.id %}"
                   class="primary-btn outline">
                    View
                </a>

            {% elif assignment.status == "PARTIAL" %}
                <span class="badge rounded-pill bg-info-subtle text-info">
                    Partially Filled
                </span>
                <a href="{% url 'employee_checkin_form' assignment.id %}"
                   class="primary-btn">
                    Continue
                </a>

            {% else %}
                <span class="badge rounded-pill bg-warning-subtle text-warning">
                    Pending
                </span>
                <a href="{% url 'employee_checkin_form' assignment.id %}"
                   class="primary-btn">
                    Submit
                </a>
            {% endif %}
        </div>
    </div>
{% empty %}
    <p style="color:#64748b;">No check-ins available.</p>
{% endfor %}

{% endblock %}
