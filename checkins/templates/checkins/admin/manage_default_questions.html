{% extends "core/admin_base.html" %}

{% block title %}Default Questions | 15-Five{% endblock %}

{% block content %}

<h1 class="fw-bold mb-4">Default Questions</h1>

<!-- ADD QUESTION -->
<form method="post" class="mb-4 d-flex gap-2">
    {% csrf_token %}
    <input
        type="text"
        name="question_text"
        class="form-control"
        placeholder="Enter default question"
        required
    >
    <button type="submit" name="add_question" class="btn btn-primary">
        Add
    </button>
</form>

<!-- LIST QUESTIONS -->
<div class="card shadow-sm">
    <div class="card-body">

        {% for q in questions %}
        <div class="d-flex justify-content-between align-items-center mb-3">

            <span>{{ q.question_text }}</span>

            <div class="d-flex gap-2">
                <button
                    class="btn btn-sm btn-outline-secondary"
                    onclick="editQuestion('{{ q.id }}', '{{ q.question_text|escapejs }}')"
                >‚úèÔ∏è</button>

                <form method="post" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="delete_question_id" value="{{ q.id }}">
                    <button class="btn btn-sm btn-outline-danger">üóëÔ∏è</button>
                </form>
            </div>

        </div>
        {% empty %}
        <p class="text-muted">No default questions yet.</p>
        {% endfor %}

    </div>
</div>

<!-- HIDDEN EDIT FORM -->
<form method="post" id="editForm">
    {% csrf_token %}
    <input type="hidden" name="edit_question_id" id="edit_question_id">
    <input type="hidden" name="edit_question_text" id="edit_question_text">
</form>

{% endblock %}

{% block scripts %}
<script>
function editQuestion(id, text) {
    const newText = prompt("Edit question:", text);
    if (!newText) return;

    document.getElementById("edit_question_id").value = id;
    document.getElementById("edit_question_text").value = newText;
    document.getElementById("editForm").submit();
}
</script>
{% endblock %}
