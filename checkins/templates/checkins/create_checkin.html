<!-- CREATE CHECKIN TEMPLATE: CHECKINS APP -->

{% extends "core/admin_base.html" %}
{% load static %}

{% block title %}Create Check-In | 15-Five{% endblock %}

{% block content %}

<div class="mb-4">
    <h1 class="fw-bold">Create Check-In</h1>
    <p class="text-muted">Configure and send a new check-in to your team</p>
</div>

<form method="post">
    {% csrf_token %}

    <!-- ================= CHECK-IN CONFIG ================= -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h5 class="fw-semibold mb-4">Check-In Configuration</h5>

            <div class="row g-4">
                <div class="col-md-6">
                    <label class="form-label fw-semibold">Check-In Period</label>
                    <select name="period" class="form-select" required>
                        <option value="WEEKLY">Weekly</option>
                        <option value="MONTHLY">Monthly</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label class="form-label fw-semibold">Deadline</label>
                    <input type="date" name="deadline" class="form-control" required>
                </div>
            </div>
        </div>
    </div>

<!-- ================= QUESTIONS ================= -->
<div class="card shadow-sm mb-4">
    <div class="card-body">
        <h5 class="fw-semibold mb-4">Questions</h5>

        {% if error %}
            <div class="alert alert-danger">
                {{ error }}
            </div>
        {% endif %}

        {% for q in questions %}
        <div class="form-check mb-3">
            <input class="form-check-input"
                   type="checkbox"
                   name="questions"
                   value="{{ q.id }}">
                   <label class="form-check-label fw-medium" style="color:#000;">
                    {{ q.question_text }}

                </label>
                
                
        </div>
        {% empty %}
        <p class="text-muted">No default questions available.</p>
        {% endfor %}

        <!-- Custom Questions -->
        <div id="custom-questions"></div>

        <button type="button"
                class="btn btn-outline-primary mt-3"
                onclick="addQuestion()">
            + Add Custom Question
        </button>
    </div>
</div>



    <!-- ================= ACTION BUTTONS ================= -->
    <div class="d-flex justify-content-end gap-3">
        <a href="{% url 'admin_dashboard' %}" class="btn btn-outline-secondary px-4">
            Cancel
        </a>
        <button type="submit" class="btn btn-primary px-4">
            Send Check-In
        </button>
    </div>

</form>

{% endblock %}

{% block scripts %}
<script>
function addQuestion() {
    const container = document.getElementById('custom-questions');

    const wrapper = document.createElement('div');
    wrapper.className = 'd-flex gap-2 mt-3';

    wrapper.innerHTML = `
        <input type="text"
               name="custom_questions[]"
               class="form-control"
               placeholder="Enter custom question"
               required>
        <button type="button"
                class="btn btn-outline-danger"
                onclick="this.parentElement.remove()">
            âœ•
        </button>
    `;

    container.appendChild(wrapper);
}
</script>
{% endblock %}

