{% extends "core/employee_base.html" %}

{% block title %}Employee Profile | 15-Five{% endblock %}

{% block content %}
<div style="max-width: 700px;">

  <h1 style="font-size:32px;font-weight:700;margin-bottom:28px;">
    My Profile
  </h1>

  <div style="
      background:#ffffff;
      border-radius:16px;
      padding:32px;
      box-shadow:0 4px 14px rgba(0,0,0,0.06);
  ">

    <!-- NAME DISPLAY -->
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
      <div style="font-size:22px;font-weight:700;">
        {% if profile.full_name %}
          {{ profile.full_name }}
        {% else %}
          {{ user.email }}
        {% endif %}
      </div>

      <!-- EDIT BUTTON -->
      <button
        type="button"
        id="editProfileBtn"
        class="primary-btn outline"
        style="padding:6px 14px;font-size:13px;"
      >
        Edit Profile
      </button>
    </div>

    <!-- EMAIL (SECONDARY INFO) -->
    <div style="color:#64748b;margin-bottom:20px;">
      {{ user.email }}
    </div>

    <hr style="margin:24px 0;border:none;border-top:1px solid #e5e7eb;">

    <!-- EDIT FORM -->
    <form method="post">
      {% csrf_token %}

      <!-- EDITABLE NAME -->
      <div id="nameInputWrapper" style="display:none;margin-bottom:20px;">
        <label style="display:block;font-size:13px;font-weight:600;color:#475569;margin-bottom:6px;">
          Full Name
        </label>
        <input
          type="text"
          name="full_name"
          value="{{ profile.full_name }}"
          placeholder="Enter your full name"
          style="
            width:100%;
            padding:12px 14px;
            border-radius:10px;
            border:1px solid #e5e7eb;
            font-size:14px;
          "
          required
        >
      </div>

      <!-- EMAIL (READ ONLY) -->
      <div style="margin-bottom:28px;">
        <label style="display:block;font-size:13px;font-weight:600;color:#475569;margin-bottom:6px;">
          Email
        </label>
        <input
          type="email"
          value="{{ user.email }}"
          disabled
          style="
            width:100%;
            padding:12px 14px;
            border-radius:10px;
            border:1px solid #e5e7eb;
            background:#f8fafc;
            color:#94a3b8;
            font-size:14px;
          "
        >
      </div>

      <button
        id="saveBtn"
        type="submit"
        class="primary-btn"
        style="padding:12px 20px;display:none;"
      >
        Save Changes
      </button>
    </form>

  </div>

</div>

<!-- SIMPLE JS -->
<script>
  const editBtn = document.getElementById("editProfileBtn");
  const inputWrapper = document.getElementById("nameInputWrapper");
  const saveBtn = document.getElementById("saveBtn");

  editBtn.addEventListener("click", () => {
    inputWrapper.style.display = "block";
    saveBtn.style.display = "inline-block";
    editBtn.style.display = "none";
  });
</script>

{% endblock %}
